<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="main.css" type="text/css" />
<link rel="stylesheet" href="blog.css" type="text/css" />
<link rel="stylesheet" href="assets/highlight/styles/corpse.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="" href="feed.rss" />
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="icon" href="/images/favicon.ico" type="image/x-icon">
<script src="assets/jquery.min.js"></script>
<script src="assets/jouele/jouele.min.js"></script>
<link href="assets/jouele/jouele.min.css" rel="stylesheet"/>
<script src="assets/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(52451890, "init", {
        id:52451890,
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52451890" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
<title>Малышам о минералах</title>
</head><body>
<div id="divbodyholder">
<div class="headerholder">
<a href="https://vk.com/evgeniy_shumilov" target="_blank"><img src="/images/logo.png" class="logo" height="106pt" style="float: left; margin-right: 20px;"></a>
<div class="header">
<div id="title">
<h1 class="nomargin"><a class="ablack" href="https://shumiloff.ru/index.html">Зайчатки разума</a></h1>
<div id="description">Записная книжка айтишника</div>
</div></div>
<ul class="full-width">
    <li>
        <a href="/pro-lyubov-k-minimalizmu-i-staticheskuyu-generaciyu-kontenta.html">О блоге</a>
<!--
        <ul>
            <li><a href="#">Item1</a></li>
            <li><a href="#">Item2</a></li>
            <li><a href="#">Item3</a></li>
        </ul>
-->
    </li>
    <li><a href="/all_tags.html">Теги</a></li>
    <li><a href="/all_posts.html">Все посты</a></li>
    <li><a href="/tag_ностальгия.html">Ностальгическое</a></li>
    <li><a href="/tag_мысли-вслух.html">Мысли вслух</a></li>
</ul>

<div class="ya-site-form ya-site-form_inited_no" onclick="return {'action':'https://yandex.ru/search/site/','arrow':false,'bg':'#b2b525','fontsize':12,'fg':'#000000','language':'ru','logo':'rw','publicname':'Поиск по shumiloff.ru','suggest':true,'target':'_self','tld':'ru','type':3,'usebigdictionary':true,'searchid':2336348,'input_fg':'#999999','input_bg':'#222222','input_fontStyle':'normal','input_fontWeight':'bold','input_placeholder':'Поиск живёт тут','input_placeholderColor':'#787A19','input_borderColor':'#999999'}"><form action="https://yandex.ru/search/site/" method="get" target="_self" accept-charset="utf-8"><input type="hidden" name="searchid" value="2336348"/><input type="hidden" name="l10n" value="ru"/><input type="hidden" name="reqenc" value=""/><input type="search" name="text" value=""/><input type="submit" value="Найти"/></form></div><style type="text/css">.ya-page_js_yes .ya-site-form_inited_no { display: none; }</style><script type="text/javascript">(function(w,d,c){var s=d.createElement('script'),h=d.getElementsByTagName('script')[0],e=d.documentElement;if((' '+e.className+' ').indexOf(' ya-page_js_yes ')===-1){e.className+=' ya-page_js_yes';}s.type='text/javascript';s.async=true;s.charset='utf-8';s.src=(d.location.protocol==='https:'?'https:':'http:')+'//site.yandex.net/v2.0/js/all.js';h.parentNode.insertBefore(s,h);(w[c]||(w[c]=[])).push(function(){Ya.Site.Form.init()})})(window,document,'yandex_site_callbacks');</script>
</div>
<div id="divbody"><div class="content">
<!-- entry begin -->
<h3><a class="ablack" href="malysham-o-mineralax.html">
Малышам о минералах
</a></h3>
<!-- bashblog_timestamp: #201811092212.03# -->
<div class="subtitle">2018-11-09 22:12:03 &mdash; 
Evgeniy Shumilov
</div>
<!-- text begin -->

<img src="images/ruby-logo.png" width="200px" height="175px" class="leftimg">
<p>&nbsp; Так называлась одна из любимых книг моего детства. После неё я ещё несколько лет собирал по песочницам разные камни, коих у меня была целая коллекция. Она, как и многое другое, благополучно канула в лету. Но это так, лирическое отступление.</p>
<p class="light">&nbsp; У нас было две версии руби из репозитория, 75 гемм, 2 версии thin сервера, ящик циклических зависимостей, пара попыток поставить отдельный environment и куча разных конфигов всех сортов и расцветок. Не то, чтобы этого было достаточно для того, чтобы поднять проект, но если связался с руби, уже трудно остановиться. Единственное, что вызывает у меня опасения - это пакеты из стока дистрибутива. Нет ничего более беспомощного, безответственного и испорченного, чем руби окружение, поставленное из стока, с установленными поверх геммами. Я знал, что рано или поздно мы перейдём на эту дрянь.</p>
<p>&nbsp; Примерно так год назад выглядел мой отчёт начальнику на его вопрос - "как там у нас с переездом редмайна на свежее окружение?"</p>
<hr/>
<p>&nbsp; Разные люди смотрят на одни и те же вещи совершенно по-разному. Если взять, например, автомобили, то простой пользователь при приобретении будет обращать внимание на эргономику, удобство, пробег и тому подобные вещи. А вот, например, человек, работающий автомехаником, приобретая себе машину, вероятно обратит бОльшее внимание на совершенно другие её свойства - надёжность например, потенциальную стоимость ремонта, доступность деталей. К чему это я? Я терпеть не могу руби. У меня стойкая аллергия к тому, что на этом языке написано. <a href="http://www.redmine.org/" target="_blank">Редмайн</a> и <a href="https://gitlab.com" target="_blank">Гитлаб</a> - прекрасны и вплоне состоялись, как проекты. Но их миграция на более свежее окружение зачастую - огромная головная боль, особенно, когда это некое legacy, которое было установлено года три-четыре назад и это нужно перенести на новую версию. Самое страшное, что редмайн, например, обрастает своими версиями плагинов, которые заброшены 5 лет тому назад и используют библиотеки, в которых что-то deprecated ещё в период мезозоя. Вобщем, по моим наблюдениям, в Ruby очень любят слово deprecated. Иногда они так делают с целыми типами данных и весь лог благополучно покрывается ворнингами - мол как это - мы это депрекейтед уже вчера, а твои библиотеки с последним коммитом семилетней давности всё ещё никто не переписал? Более того, когда разработчики на руби начинают писать шелл скрипты - туши свет! Помню, как-то столкнулся с проблемой - не поднимался гитлаб после аварийного&nbsp;ребута. Оказывается, сервис скрипт для SysV init, написанный разработчиками гитлаба работал в соответствии с шикарной логикой. При запуске:</p>
<ul>
<li>проверяем наличие pid&nbsp;файла</li>
<li>если его нет -&nbsp;поднимаем гитлаб (!!!)</li>
<li>берём его&nbsp;pid</li>
<li>складываем его в pid&nbsp;файл</li>
</ul>
<p>&nbsp; Ну и при отановке соответственно, pid файл удалялся. Гениально! Если файл есть, то значит, гитлаб поднят и поднимать его уже не надо! Железная логика! Дописать одну строку, которая будет проверять наличие&nbsp;процесса с пидом из файла и проверять, что этот процесс и есть гитлаб? Это похоже, выше их достоинства.</p>
<p>&nbsp; При переносе на новую версию тоже приходилось подпрыгивать, выполнять инструкицю по переходу, состоящую из пары десятков пунктов, некоторые из которых занимали приличное количество времени. Особенно миграции базы. Поэтому приходилось делать это в выходные, чтобы ещё успеть всё более-менее проверить. А потом в понедельник всё отдавалось отделу тестирования на дополнительную проверку, в результате чего вылезали какие-то мелкие проблемы - уже смутно это всё помню, много лет уже прошло. Но с полгода назад Umputun в <a href="https://radio-t.com/">Radio-T</a>&nbsp;рассказывал, что тоже наткнулся на какие-то проблемы при миграции гитлаба. Кажется, какая-то группа пользователей была названа system, а разработчики гитлаба решили взять это имя группы в качестве системного и с этого момента миграция пошла по пи... Поехала по рельсам, ага. Ruby on Rails же... Одним словом - в отношении удобства и функционала что Redmine, что Gitlab выглядят очень приятными и качественными продуктами. Но если бы я решил себе поставить систему управления задачами, я бы трижды подумал, а стОит ли брать redmine? А при желании установить систему контроля версий - gitlab точно не поставил бы. В качестве сервиса в то же время я его использую и он меня всем устраивает. Особенно тем, что поддерживать его приходится не мне.</p>
<p><img src="images/kallithea.png"></p>
<p>&nbsp; Кстати, довольно интересной альтернативой гитлабу является <a href="https://kallithea-scm.org/" target="_blank">Kallithea</a>&nbsp;- очень рекомендую посмотреть, хотя бы из любопытства. Может быть, она не настолько развесиста, но весь основной функицонал в ней присутствует и при этом никаких проблем с апгрейдом версий я не встретил. Маленькая, быстрая, лёгкая, есть gist, управление правами доступа, возможность работать с гитом через https с авторизацией и прочие плюшки.&nbsp;</p>

<p>Теги: <a href='tag_ruby.html'>ruby</a>, <a href='tag_админское.html'>админское</a>, <a href='tag_fun.html'>fun</a></p>

<!-- text end -->
<!-- entry end -->
</div>
<div id="disqus_thread"></div>
            <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
               var disqus_shortname = 'shumiloff'; // required: replace example with your forum shortname

            /* * * DONT EDIT BELOW THIS LINE * * */
            (function() {
            var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
            dsq.src = "//" + disqus_shortname + ".disqus.com/embed.js";
            (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
<div id="footer">
<!-- Tolstoy Comments
<script type="text/javascript">!(function(w,d,s,l,x){w[l]=w[l]||[];var f=d.getElementsByTagName(s)[0],j=d.createElement(s);j.async=!0;j.src='//web.tolstoycomments.com/sitejs/app.js?i='+l+'&x='+x+'&t='+(new Date().getTime());f.parentNode.insertBefore(j,f)})(window,document,'script','tolstoycomments','1577');</script>
-->
<a href="https://vk.com/evgeniy_shumilov">Evgeniy Shumilov</a> &mdash; <a href="mailto:evgeniy&#46;shumilov&#64;gmail&#46;com">evgeniy&#46;shumilov&#64;gmail&#46;com</a><br/>
Generated with <a href="https://github.com/cfenollosa/bashblog">bashblog</a>, a single bash script to easily create blogs like this one</div>
</div></div>
</div></div>
<script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'shumiloff'; // required: replace example with your forum shortname

        /* * * DONT EDIT BELOW THIS LINE * * */
        (function () {
        var s = document.createElement("script"); s.async = true;
        s.type = "text/javascript";
        s.src = "//" + disqus_shortname + ".disqus.com/count.js";
        (document.getElementsByTagName("HEAD")[0] || document.getElementsByTagName("BODY")[0]).appendChild(s);
    }());
    </script>
</body></html>
